---
title: "[파이썬] 파이썬의 이상한 점!?"

categories:
    - Python
tags:
    - Python
    - Coding
    - Review
last_modified_at: 2024-02-13T21:20:00

toc: true
toc_sticky: true
toc_label: "On This Page"
---

> 파이썬은 가장 인기가 많은 프로그래밍 언어이지만 그렇다고 완벽한 것은 아닙니다. 이번 장에서는 파이썬이 갖고 있는 기이한 특징들에 대해서 알아보고자 합니다. <br>

> 이 포스트의 내용은 저자 Al Sweigart의 "클린 코드, 이제는 파이썬이다" 9장 내용임을 사전에 미리 밝힙니다!

# 1. 257 is 257은 참일까?
&#160; 우선 is 연산자는 두 객체가 같은 값을 비교하는 것이 아니라 두 객체의 id가 같은지를 비교하는 연산자입니다. 예를 들면 다음과 같습니다.
```python
a = 10
b = 10.0

a == b  # True
a is b  # False
```

&#160; 10과 10.0은 같은 값입니다. 하지만 is 연산은 False를 반환합니다. a는 정수(int) 객체이고, b는 float형 객체이기 때문에 두 객체의 id가 다르기 때문입니다. 여기에 파이썬이 갖고 있는 특징이 더해져 특이한 현상이 발생합니다.
```python
a = 256
b = 256
a is b  # True

c = 257
d = 257
c is d  # False
```

&#160; 256은 두 객체의 id가 동일한데 257은 두 객체의 id가 다르네요. 왜 그럴까요?<br><br>
&#160; 답은 파이썬이 갖고 있는 **미리 할당된 정수(preallocated)** 때문입니다. 파이썬은 메모리 최적화를 위해 프로그램 시작 시, -5 ~ 256까지 정수 객체를 미리 생성한 후, 새로운 정수 객체를 생성하지 않고 기존의 정수 객체를 반환하는 방식을 사용합니다. 따라서 우리가 변수에 -5 ~ 256까지의 정수를 할당할 때 새로운 정수 객체를 생성하는 것이 아니라 미리 생성된 정수 객체에 대한 참조를 연결하는 방법을 써서 메모리를 절약하는 것입니다. -5 ~ 256까지는 자주 사용하는 정수이기에 정해진 룰이고 별다른 의미는 없다고 합니다. 사소하다면 사소한 특징이고 사실 정수 객체에 대해서는 값을 사용하지 id를 사용하진 않기에 크게 문제될 상황이 많지는 않을 것입니다.<br>

# 2. 문자열 인터닝
&#160; 문자열 인터닝(interning) 또한 미리 할당된 정수와 같은 C파이썬의 메모리 최적화 방법 중 하나입니다. 동일한 문자열에 대해서는 별도의 객체를 생성하지 않고 객체를 재사용하는 것을 말합니다.
```python
soup = 'cat'
rice = 'cat'

soup is rice  # True
```

&#160; 파이썬은 soup와 rice 변수에 할당되는 문자열이 동일하다면, 동일 문자열 객체를 생성하는 대신 문자열에 대한 참조를 복제하여 새로운 변수에 할당합니다. 참조를 복사하는 것을 알았으니 이를 활용하여 프로그램을 작성해도 될까요? 그것은 제 개인적인 생각으로는 매우 위험한 발상이라고 생각하며 저자도 그렇게 얘기합니다. 

# 3. 가짜 증감 연산자
&#160; 파이썬에는 '+=', '-='와 같은 **증강 할당 연산자(augmented assignment operator)**가 존재합니다. 만약 '- -' 연산자를 사용하면 어떻게 될까요?
```python
kimchi = 42
kimchi = --kimchi
# 42
```

&#160; 파이썬은 -(단항 부정 연산자(unary negation operator))를 중복하여 사용할 수 있습니다. 다만 C나 자바스크립트 등에 언어에서 사용하는 '++', '- -' 연산자와는 다르기에 혼동하여 사용하면 안됩니다. 만약 단항 부정 연산자를 2번 연속하여 사용하게 되면 음수 * 음수가 되어 원래의 값으로 평가됩니다. 따라서 굳이 사용할 필요가 있는 연산자는 아닙니다. 만약, C, C++, JavaScript 등의 익숙한 프로그래머 분들이라면 헷갈릴 수 있으나 저처럼 파이썬으로 프로그래밍을 시작하신 분들이라면 크게 헷갈리지 않고 사용할 수 있을 겁니다.

# 4. all()?
&#160; 내장함수 all()은 수열값을 받아서 모든 값이 참이면 True, 하나 이상의 값이 거짓이면 False를 반환합니다. 더 정확하게는 all() 함수는 이 리스트의 아이템 중 어느 것도 거짓이 아니다라는 것을 평가합니다.

# 5. 부울값은 정수값!
&#160; 종종 프로그래밍 언어에서 그렇듯이 파이썬도 부울값 True, False를 각각 1과 0으로 취급합니다. 파이썬에서 bool 타입은 int 타입의 하위 클래스기 때문입니다. 이 특징은 bool 타입 데이터로도 수학적인 연산을 가능하게 하기 때문입니다.

# 6. 다중 연산자 연달아 쓰기
&#160; 동일 표현식 안에서 다양한 종류의 연산자를 연달아 쓰면 예상치 못한 버그가 발생할 수 있습니다.
```python
False == False in [False]  # True
```

&#160; 위 표현식은 어떻게 작동되기에 True가 나올까요? 실제로는 (False == False) and (False in [False])로 인식합니다. 따라서 True and True가 되어 True가 반환됩니다. 위와 같이 조금은 특이한 상황이 발생할 수 있기에 다중 연산자를 연달아 쓰는 것은 좋은 방식은 아니라 생각됩니다.

# 9. 마치며...
&#160; 파이썬을 활용하다보면 정말 생산적이고 훌룡한 언어임에는 틀림이 없다 생각합니다. 그러다보면 파이썬도 버그가 있을까? 특이한 점이 있을까? 의심하기 쉽지 않지만, 역시 파이썬도 인간이 개발한 언어이고 허점은 분명히 존재할 수 있습니다. 그렇기에 이런 사소한 부분도 숙지하고 있다면 혹시나 발생할 수 있는 에러에 대해 미리 대응할 수 있고 프로그래머로서 실력을 증가시킬 수 있을 것입니다!